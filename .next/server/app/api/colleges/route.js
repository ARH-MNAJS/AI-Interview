(()=>{var e={};e.id=564,e.ids=[564],e.modules={6472:e=>{"use strict";e.exports=require("@opentelemetry/api")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},1659:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>b,routeModule:()=>d,serverHooks:()=>f,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>u});var a={};r.r(a),r.d(a,{GET:()=>i});var c=r(97),s=r(7278),n=r(3173),o=r(9131);async function i(e){try{let{searchParams:t}=new URL(e.url),r=t.get("collegeId"),a=t.get("type");if(r&&"branches"===a){let e=await (0,o.eE)(r);return Response.json({success:!0,data:e},{status:200})}if(r&&"years"===a){let e=await (0,o.Ak)(r);return Response.json({success:!0,data:e},{status:200})}let c=await (0,o.JY)();return Response.json({success:!0,data:c},{status:200})}catch(e){return console.error("Error fetching college data:",e),Response.json({success:!1,error:"Failed to fetch college data"},{status:500})}}let d=new c.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/colleges/route",pathname:"/api/colleges",filename:"route",bundlePath:"app/api/colleges/route"},resolvedPagePath:"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\api\\colleges\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:l,workUnitAsyncStorage:u,serverHooks:f}=d;function b(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:u})}},3310:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"009014325b7b1bd583f774c05c90e0e17384c4d9c2":()=>a.wR,"00be45b3173ac93d69fcb3fb8303fc683a5e143903":()=>a.HW,"00c0fa45a1a28d5c16a6a1cd96c00d8afb18bb0e1f":()=>a.JY,"00fc42ac67bd00033b3cf0566aa46eb1569b3de7c7":()=>a.CI,"4001e2350799b5b70180c9b09d6afd1d67d18b1cd7":()=>a.eE,"400474cd152df4b1763b585619d55899cc4d23ad4a":()=>a.Ak,"400ec9ec2f4989b37dac48b258fb0e8c0c57da9228":()=>a.Hh,"4030a8907117017840e541e66b3878f2958fcea903":()=>a.Jv,"4067e603649f68be5a1d67c3f86d219019826049e1":()=>a.$G,"40b6039dc5914bcc16040feeaf3fcb60b605e330a9":()=>a.ef});var a=r(9131)},5522:()=>{},8730:()=>{},97:(e,t,r)=>{"use strict";e.exports=r(4870)},7920:(e,t,r)=>{"use strict";r.d(t,{db:()=>c,j:()=>a}),function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'firebase-admin/auth'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'firebase-admin/firestore'");throw e.code="MODULE_NOT_FOUND",e}();let{auth:a,db:c}=(Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())().length||Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())({credential:Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())({projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n")})}),{auth:Object(function(){var e=Error("Cannot find module 'firebase-admin/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),db:Object(function(){var e=Error("Cannot find module 'firebase-admin/firestore'");throw e.code="MODULE_NOT_FOUND",e}())()})},9131:(e,t,r)=>{"use strict";r.d(t,{$G:()=>n,Ak:()=>d,CI:()=>b,HW:()=>p,Hh:()=>u,JY:()=>o,Jv:()=>f,eE:()=>i,ef:()=>l,wR:()=>g});var a=r(6780);r(7704);var c=r(7920),s=r(9389);async function n(e){let t=await (0,s.UL)(),r=await c.j.createSessionCookie(e,{expiresIn:6048e5});t.set("session",r,{maxAge:604800,httpOnly:!0,secure:!0,path:"/",sameSite:"lax"})}async function o(){try{return(await c.db.collection("colleges").get()).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching colleges:",e),[]}}async function i(e){try{let t=await c.db.collection("colleges").doc(e).get();if(!t.exists)return[];return t.data().branches||[]}catch(e){return console.error("Error fetching college branches:",e),[]}}async function d(e){try{let t=await c.db.collection("colleges").doc(e).get();if(!t.exists)return[];return t.data().years||[]}catch(e){return console.error("Error fetching college years:",e),[]}}async function l(e){try{let t=await c.db.collection("colleges").where("tpoUserId","==",e).limit(1).get();if(t.empty)return null;return t.docs[0].id}catch(e){return console.error("Error checking TPO access:",e),null}}async function u(e){let{uid:t,name:r,email:a,college:s,branch:n,year:o}=e;try{if((await c.db.collection("users").doc(t).get()).exists)return{success:!1,message:"User already exists. Please sign in."};let e={name:r,email:a};return s&&(e.college=s),n&&(e.branch=n),o&&(e.year=o),await c.db.collection("users").doc(t).set(e),{success:!0,message:"Account created successfully. Please sign in."}}catch(e){if(console.error("Error creating user:",e),"auth/email-already-exists"===e.code)return{success:!1,message:"This email is already in use"};return{success:!1,message:"Failed to create account. Please try again."}}}async function f(e){let{email:t,idToken:r}=e;try{if(!await c.j.getUserByEmail(t))return{success:!1,message:"User does not exist. Create an account."};await n(r)}catch(e){return console.log(""),{success:!1,message:"Failed to log into account. Please try again."}}}async function b(){(await (0,s.UL)()).delete("session")}async function p(){let e=await (0,s.UL)(),t=e.get("session")?.value;if(!t)return null;try{let e=await c.j.verifySessionCookie(t,!0),r=await c.db.collection("users").doc(e.uid).get();if(!r.exists)return null;return{...r.data(),id:r.id}}catch(e){return console.log(e),null}}async function g(){return!!await p()}(0,r(960).D)([n,o,i,d,l,u,f,b,p,g]),(0,a.A)(n,"4067e603649f68be5a1d67c3f86d219019826049e1",null),(0,a.A)(o,"00c0fa45a1a28d5c16a6a1cd96c00d8afb18bb0e1f",null),(0,a.A)(i,"4001e2350799b5b70180c9b09d6afd1d67d18b1cd7",null),(0,a.A)(d,"400474cd152df4b1763b585619d55899cc4d23ad4a",null),(0,a.A)(l,"40b6039dc5914bcc16040feeaf3fcb60b605e330a9",null),(0,a.A)(u,"400ec9ec2f4989b37dac48b258fb0e8c0c57da9228",null),(0,a.A)(f,"4030a8907117017840e541e66b3878f2958fcea903",null),(0,a.A)(b,"00fc42ac67bd00033b3cf0566aa46eb1569b3de7c7",null),(0,a.A)(p,"00be45b3173ac93d69fcb3fb8303fc683a5e143903",null),(0,a.A)(g,"009014325b7b1bd583f774c05c90e0e17384c4d9c2",null)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[173,526,658],()=>r(1659));module.exports=a})();