(()=>{var e={};e.id=544,e.ids=[544],e.modules={6472:e=>{"use strict";e.exports=require("@opentelemetry/api")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},753:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>p,routeModule:()=>u,serverHooks:()=>b,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>f});var a={};t.r(a),t.d(a,{POST:()=>d});var c=t(97),n=t(7278),s=t(3173),o=t(3456),i=t(9131);async function d(e){try{return await (0,i.CI)(),o.NextResponse.json({success:!0})}catch(e){return console.error("Error signing out:",e),o.NextResponse.json({success:!1},{status:500})}}let u=new c.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/signout/route",pathname:"/api/auth/signout",filename:"route",bundlePath:"app/api/auth/signout/route"},resolvedPagePath:"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\api\\auth\\signout\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:l,workUnitAsyncStorage:f,serverHooks:b}=u;function p(){return(0,s.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:f})}},3310:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"009014325b7b1bd583f774c05c90e0e17384c4d9c2":()=>a.wR,"00be45b3173ac93d69fcb3fb8303fc683a5e143903":()=>a.HW,"00c0fa45a1a28d5c16a6a1cd96c00d8afb18bb0e1f":()=>a.JY,"00fc42ac67bd00033b3cf0566aa46eb1569b3de7c7":()=>a.CI,"4001e2350799b5b70180c9b09d6afd1d67d18b1cd7":()=>a.eE,"400474cd152df4b1763b585619d55899cc4d23ad4a":()=>a.Ak,"400ec9ec2f4989b37dac48b258fb0e8c0c57da9228":()=>a.Hh,"4030a8907117017840e541e66b3878f2958fcea903":()=>a.Jv,"4067e603649f68be5a1d67c3f86d219019826049e1":()=>a.$G,"40b6039dc5914bcc16040feeaf3fcb60b605e330a9":()=>a.ef});var a=t(9131)},5522:()=>{},8730:()=>{},7920:(e,r,t)=>{"use strict";t.d(r,{db:()=>c,j:()=>a}),function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'firebase-admin/auth'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'firebase-admin/firestore'");throw e.code="MODULE_NOT_FOUND",e}();let{auth:a,db:c}=(Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())().length||Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())({credential:Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())({projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n")})}),{auth:Object(function(){var e=Error("Cannot find module 'firebase-admin/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),db:Object(function(){var e=Error("Cannot find module 'firebase-admin/firestore'");throw e.code="MODULE_NOT_FOUND",e}())()})},9131:(e,r,t)=>{"use strict";t.d(r,{$G:()=>s,Ak:()=>d,CI:()=>b,HW:()=>p,Hh:()=>l,JY:()=>o,Jv:()=>f,eE:()=>i,ef:()=>u,wR:()=>g});var a=t(6780);t(7704);var c=t(7920),n=t(9389);async function s(e){let r=await (0,n.UL)(),t=await c.j.createSessionCookie(e,{expiresIn:6048e5});r.set("session",t,{maxAge:604800,httpOnly:!0,secure:!0,path:"/",sameSite:"lax"})}async function o(){try{return(await c.db.collection("colleges").get()).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching colleges:",e),[]}}async function i(e){try{let r=await c.db.collection("colleges").doc(e).get();if(!r.exists)return[];return r.data().branches||[]}catch(e){return console.error("Error fetching college branches:",e),[]}}async function d(e){try{let r=await c.db.collection("colleges").doc(e).get();if(!r.exists)return[];return r.data().years||[]}catch(e){return console.error("Error fetching college years:",e),[]}}async function u(e){try{let r=await c.db.collection("colleges").where("tpoUserId","==",e).limit(1).get();if(r.empty)return null;return r.docs[0].id}catch(e){return console.error("Error checking TPO access:",e),null}}async function l(e){let{uid:r,name:t,email:a,college:n,branch:s,year:o}=e;try{if((await c.db.collection("users").doc(r).get()).exists)return{success:!1,message:"User already exists. Please sign in."};let e={name:t,email:a};return n&&(e.college=n),s&&(e.branch=s),o&&(e.year=o),await c.db.collection("users").doc(r).set(e),{success:!0,message:"Account created successfully. Please sign in."}}catch(e){if(console.error("Error creating user:",e),"auth/email-already-exists"===e.code)return{success:!1,message:"This email is already in use"};return{success:!1,message:"Failed to create account. Please try again."}}}async function f(e){let{email:r,idToken:t}=e;try{if(!await c.j.getUserByEmail(r))return{success:!1,message:"User does not exist. Create an account."};await s(t)}catch(e){return console.log(""),{success:!1,message:"Failed to log into account. Please try again."}}}async function b(){(await (0,n.UL)()).delete("session")}async function p(){let e=await (0,n.UL)(),r=e.get("session")?.value;if(!r)return null;try{let e=await c.j.verifySessionCookie(r,!0),t=await c.db.collection("users").doc(e.uid).get();if(!t.exists)return null;return{...t.data(),id:t.id}}catch(e){return console.log(e),null}}async function g(){return!!await p()}(0,t(960).D)([s,o,i,d,u,l,f,b,p,g]),(0,a.A)(s,"4067e603649f68be5a1d67c3f86d219019826049e1",null),(0,a.A)(o,"00c0fa45a1a28d5c16a6a1cd96c00d8afb18bb0e1f",null),(0,a.A)(i,"4001e2350799b5b70180c9b09d6afd1d67d18b1cd7",null),(0,a.A)(d,"400474cd152df4b1763b585619d55899cc4d23ad4a",null),(0,a.A)(u,"40b6039dc5914bcc16040feeaf3fcb60b605e330a9",null),(0,a.A)(l,"400ec9ec2f4989b37dac48b258fb0e8c0c57da9228",null),(0,a.A)(f,"4030a8907117017840e541e66b3878f2958fcea903",null),(0,a.A)(b,"00fc42ac67bd00033b3cf0566aa46eb1569b3de7c7",null),(0,a.A)(p,"00be45b3173ac93d69fcb3fb8303fc683a5e143903",null),(0,a.A)(g,"009014325b7b1bd583f774c05c90e0e17384c4d9c2",null)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[173,526,658,431],()=>t(753));module.exports=a})();