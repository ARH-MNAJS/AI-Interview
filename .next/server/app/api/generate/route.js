(()=>{var e={};e.id=435,e.ids=[435],e.modules={6472:e=>{"use strict";e.exports=require("@opentelemetry/api")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2528:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>h,serverHooks:()=>g,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>O});var o={};r.r(o),r.d(o,{GET:()=>p,POST:()=>u});var n=r(97),a=r(7278),s=r(3173),i=r(7920),l=r(5349),c=r(7870),d=r(2348);async function u(e){try{let t;let r=e.headers.get("authorization"),o=null;if(r?.startsWith("Bearer ")){let e=r.substring(7);try{o=(await i.j.verifyIdToken(e)).uid}catch(e){d.v.error("API Generate","ID token verification failed",e)}}let{type:n,role:a,level:s,techstack:u,amount:p,userid:h,targetColleges:m,targetBranches:O,targetYears:g}=await e.json(),f=o||h;if("i0bZW01fAeMaiqm2WSOKxFxwTAx2"!==f)return d.v.warn("API Generate","Unauthorized access attempt",{userId:f}),Response.json({success:!1,error:"Unauthorized access"},{status:403});if(!n||!a||!s||!u||!p)return Response.json({success:!1,error:"Missing required fields"},{status:400});if(!m||!O||!g)return Response.json({success:!1,error:"Missing targeting fields (colleges, branches, years)"},{status:400});d.v.info("API Generate","Starting interview generation",{role:a,level:s,type:n,techstack:u,amount:p,targetColleges:m.length,targetBranches:O.length,targetYears:g.length,userId:f});let b=`Prepare questions for a job interview.
        The job role is ${a}.
        The job experience level is ${s}.
        The tech stack used in the job is: ${u}.
        The focus between behavioural and technical questions should lean towards: ${n}.
        The amount of questions required is: ${p}.
        Please return only the questions, without any additional text.
        The questions are going to be read by a voice assistant so do not use "/" or "*" or any other special characters which might break the voice assistant.
        Return the questions formatted like this:
        ["Question 1", "Question 2", "Question 3"]
        
        Thank you!`,v=await c.d.generateResponse([{role:"user",content:b}]);d.v.debug("API Generate","Raw LLM response",{response:v});try{if(t=JSON.parse(v),!Array.isArray(t))throw Error("Response is not an array")}catch(e){if(d.v.warn("API Generate","Failed to parse JSON, attempting text extraction",{error:e,rawResponse:v}),t=v.split("\n").filter(e=>e.trim()).filter(e=>e.includes("?")&&!e.toLowerCase().includes("thank you")&&e.length>10).map(e=>e.replace(/^\d+\.?\s*/,"").replace(/^["\[\]]/g,"").replace(/["\[\]],?$/g,"").trim()).slice(0,p),0===t.length)return d.v.error("API Generate","No valid questions extracted",{rawResponse:v}),Response.json({success:!1,error:"Failed to generate valid questions"},{status:500})}t.length<p&&d.v.warn("API Generate","Generated fewer questions than requested",{requested:p,generated:t.length});let L={role:a,type:n,level:s,techstack:"string"==typeof u?u.split(",").map(e=>e.trim()):Array.isArray(u)?u:[],questions:t,userId:f,finalized:!0,coverImage:(0,l.o)(),createdAt:new Date().toISOString(),targetColleges:m,targetBranches:O,targetYears:g},E=await i.db.collection("interviews").add(L);return d.v.info("API Generate","Interview generated successfully",{interviewId:E.id,questionsGenerated:t.length,targetColleges:m.length,targetBranches:O.length,targetYears:g.length,userId:f}),Response.json({success:!0,interviewId:E.id,questionsGenerated:t.length},{status:200})}catch(e){return d.v.error("API Generate","Interview generation failed",e),console.error("Error:",e),Response.json({success:!1,error:e instanceof Error?e.message:"Unknown error occurred"},{status:500})}}async function p(){return Response.json({success:!0,message:"Interview Generation API",status:"active"},{status:200})}let h=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/generate/route",pathname:"/api/generate",filename:"route",bundlePath:"app/api/generate/route"},resolvedPagePath:"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\api\\generate\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:m,workUnitAsyncStorage:O,serverHooks:g}=h;function f(){return(0,s.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:O})}},5522:()=>{},8730:()=>{},97:(e,t,r)=>{"use strict";e.exports=r(4870)},7920:(e,t,r)=>{"use strict";r.d(t,{db:()=>n,j:()=>o}),function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'firebase-admin/auth'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'firebase-admin/firestore'");throw e.code="MODULE_NOT_FOUND",e}();let{auth:o,db:n}=(Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())().length||Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())({credential:Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())({projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n")})}),{auth:Object(function(){var e=Error("Cannot find module 'firebase-admin/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),db:Object(function(){var e=Error("Cannot find module 'firebase-admin/firestore'");throw e.code="MODULE_NOT_FOUND",e}())()})},9429:(e,t,r)=>{"use strict";r.d(t,{E$:()=>o});let o={EDGE_TTS:{URL:process.env.NEXT_PUBLIC_EDGE_TTS_URL||"https://dyptts.ccxai.uk",VOICE_ID:process.env.NEXT_PUBLIC_TTS_VOICE_ID||"en-IN-NeerjaExpressiveNeural"},WHISPER_STT:{URL:process.env.NEXT_PUBLIC_WHISPER_STT_URL||"https://dypstt.ccxai.uk"},OLLAMA:{URL:process.env.NEXT_PUBLIC_OLLAMA_URL||"https://dypai.ccxai.uk",MODEL:process.env.NEXT_PUBLIC_OLLAMA_MODEL||"gemma3:latest"}}},2348:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});class o{createLogEntry(e,t,r,o,n){return{timestamp:new Date().toISOString(),level:e,service:t,message:r,data:o,error:n}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&this.logs.shift();let t=`[${e.timestamp}] [${e.level.toUpperCase()}] [${e.service}] ${e.message}`;switch(e.level){case"debug":console.debug(t,e.data);break;case"info":console.info(t,e.data);break;case"warn":console.warn(t,e.data);break;case"error":console.error(t,e.error||e.data)}}debug(e,t,r){this.addLog(this.createLogEntry("debug",e,t,r))}info(e,t,r){this.addLog(this.createLogEntry("info",e,t,r))}warn(e,t,r){this.addLog(this.createLogEntry("warn",e,t,r))}error(e,t,r){this.addLog(this.createLogEntry("error",e,t,void 0,r))}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}constructor(){this.logs=[],this.maxLogs=1e3}}let n=new o},7870:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var o=r(9429),n=r(2348);class a{constructor(){this.baseUrl=o.E$.OLLAMA.URL,this.model=o.E$.OLLAMA.MODEL,n.v.info("OllamaLLMAdapter","Initialized Ollama LLM adapter",{baseUrl:this.baseUrl,model:this.model})}async generateResponse(e){n.v.debug("OllamaLLMAdapter","Starting LLM generation",{messageCount:e.length,model:this.model});try{let t=await fetch(`${this.baseUrl}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:this.model,messages:e,stream:!1})});if(!t.ok)throw Error(`Ollama responded with status: ${t.status}`);let r=await t.json(),o=r.message.content;return n.v.info("OllamaLLMAdapter","LLM generation completed",{responseLength:o.length,totalDuration:r.total_duration,evalCount:r.eval_count}),o}catch(e){throw n.v.error("OllamaLLMAdapter","LLM generation failed",e),e}}async *generateStreamingResponse(e){n.v.debug("OllamaLLMAdapter","Starting streaming LLM generation",{messageCount:e.length,model:this.model});try{let t=await fetch(`${this.baseUrl}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:this.model,messages:e,stream:!0})});if(!t.ok)throw Error(`Ollama responded with status: ${t.status}`);let r=t.body?.getReader();if(!r)throw Error("No response body reader available");let o=new TextDecoder,a="";try{for(;;){let{done:e,value:t}=await r.read();if(e)break;let s=(a+=o.decode(t,{stream:!0})).split("\n");for(let e of(a=s.pop()||"",s))if(e.trim())try{let t=JSON.parse(e);if(t.message?.content&&(yield t.message.content),t.done){n.v.info("OllamaLLMAdapter","Streaming LLM generation completed");return}}catch(t){n.v.warn("OllamaLLMAdapter","Failed to parse streaming response line",{line:e})}}}finally{r.releaseLock()}}catch(e){throw n.v.error("OllamaLLMAdapter","Streaming LLM generation failed",e),e}}async testConnection(){try{n.v.debug("OllamaLLMAdapter","Testing Ollama service connection");let e=await fetch(`${this.baseUrl}/api/tags`);if(!e.ok)return n.v.info("OllamaLLMAdapter","Ollama service health check",{status:"unhealthy",statusCode:e.status}),!1;{let t=await e.json(),r=t.models?.some(e=>e.name.includes(this.model.split(":")[0]));return n.v.info("OllamaLLMAdapter","Ollama service health check",{status:"healthy",modelAvailable:r,availableModels:t.models?.map(e=>e.name)||[]}),r}}catch(e){return n.v.error("OllamaLLMAdapter","Ollama service health check failed",e),!1}}async pullModel(){try{return n.v.info("OllamaLLMAdapter","Pulling model",{model:this.model}),(await fetch(`${this.baseUrl}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.model})})).ok}catch(e){return n.v.error("OllamaLLMAdapter","Model pull failed",e),!1}}}let s=new a},5349:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a,o:()=>c,$:()=>l}),function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();let o={"react.js":"react",reactjs:"react",react:"react","next.js":"nextjs",nextjs:"nextjs",next:"nextjs","vue.js":"vuejs",vuejs:"vuejs",vue:"vuejs","express.js":"express",expressjs:"express",express:"express","node.js":"nodejs",nodejs:"nodejs",node:"nodejs",mongodb:"mongodb",mongo:"mongodb",mongoose:"mongoose",mysql:"mysql",postgresql:"postgresql",sqlite:"sqlite",firebase:"firebase",docker:"docker",kubernetes:"kubernetes",aws:"aws",azure:"azure",gcp:"gcp",digitalocean:"digitalocean",heroku:"heroku",photoshop:"photoshop","adobe photoshop":"photoshop",html5:"html5",html:"html5",css3:"css3",css:"css3",sass:"sass",scss:"sass",less:"less",tailwindcss:"tailwindcss",tailwind:"tailwindcss",bootstrap:"bootstrap",jquery:"jquery",typescript:"typescript",ts:"typescript",javascript:"javascript",js:"javascript","angular.js":"angular",angularjs:"angular",angular:"angular","ember.js":"ember",emberjs:"ember",ember:"ember","backbone.js":"backbone",backbonejs:"backbone",backbone:"backbone",nestjs:"nestjs",graphql:"graphql","graph ql":"graphql",apollo:"apollo",webpack:"webpack",babel:"babel","rollup.js":"rollup",rollupjs:"rollup",rollup:"rollup","parcel.js":"parcel",parceljs:"parcel",npm:"npm",yarn:"yarn",git:"git",github:"github",gitlab:"gitlab",bitbucket:"bitbucket",figma:"figma",prisma:"prisma",redux:"redux",flux:"flux",redis:"redis",selenium:"selenium",cypress:"cypress",jest:"jest",mocha:"mocha",chai:"chai",karma:"karma",vuex:"vuex","nuxt.js":"nuxt",nuxtjs:"nuxt",nuxt:"nuxt",strapi:"strapi",wordpress:"wordpress",contentful:"contentful",netlify:"netlify",vercel:"vercel","aws amplify":"amplify"};Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({totalScore:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).number(),categoryScores:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).tuple([Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({name:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).literal("Communication Skills"),score:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).number(),comment:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string()}),Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({name:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).literal("Technical Knowledge"),score:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).number(),comment:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string()}),Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({name:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).literal("Problem Solving"),score:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).number(),comment:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string()}),Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({name:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).literal("Cultural Fit"),score:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).number(),comment:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string()}),Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({name:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).literal("Confidence and Clarity"),score:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).number(),comment:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string()})]),strengths:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).array(Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string()),areasForImprovement:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).array(Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string()),finalAssessment:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string()});let n=["/adobe.png","/amazon.png","/facebook.png","/hostinger.png","/pinterest.png","/quora.png","/reddit.png","/skype.png","/spotify.png","/telegram.png","/tiktok.png","/yahoo.png"];function a(...e){return Object(function(){var e=Error("Cannot find module 'tailwind-merge'");throw e.code="MODULE_NOT_FOUND",e}())(Object(function(){var e=Error("Cannot find module 'clsx'");throw e.code="MODULE_NOT_FOUND",e}())(e))}(function(){var e=Error("Cannot find module 'clsx'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module 'tailwind-merge'");throw e.code="MODULE_NOT_FOUND",e}();let s=e=>o[e.toLowerCase().replace(/\.js$/,"").replace(/\s+/g,"")],i=async e=>{try{return(await fetch(e,{method:"HEAD"})).ok}catch{return!1}},l=async e=>{let t=e.map(e=>{let t=s(e);return{tech:e,url:`https://cdn.jsdelivr.net/gh/devicons/devicon/icons/${t}/${t}-original.svg`}});return await Promise.all(t.map(async({tech:e,url:t})=>({tech:e,url:await i(t)?t:"/tech.svg"})))},c=()=>{let e=Math.floor(Math.random()*n.length);return`/covers${n[e]}`}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[173],()=>r(2528));module.exports=o})();