(()=>{var e={};e.id=275,e.ids=[275],e.modules={6472:e=>{"use strict";e.exports=require("@opentelemetry/api")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2883:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>l,serverHooks:()=>v,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{GET:()=>u,POST:()=>c});var a=t(97),o=t(7278),n=t(3173),i=t(7920),d=t(2348);async function c(e){try{let r;let t=e.headers.get("authorization"),s=null;if(t?.startsWith("Bearer ")){let e=t.substring(7);try{s=(await i.j.verifyIdToken(e)).uid}catch(e){d.v.error("API Save Feedback","ID token verification failed",e)}}let{interviewId:a,userId:o,feedbackId:n,totalScore:c,categoryScores:u,strengths:l,areasForImprovement:p,finalAssessment:f}=await e.json(),v=s||o;if(!a||!v||!c||!u)return Response.json({success:!1,error:"Missing required fields"},{status:400});d.v.info("API Save Feedback","Saving feedback to database",{interviewId:a,userId:v,totalScore:c,categoriesCount:u.length});let g={interviewId:a,userId:v,totalScore:c,categoryScores:u,strengths:l||[],areasForImprovement:p||[],finalAssessment:f||"",createdAt:new Date().toISOString()};return r=n?i.db.collection("feedback").doc(n):i.db.collection("feedback").doc(),await r.set(g),d.v.info("API Save Feedback","Feedback saved successfully",{feedbackId:r.id,interviewId:a,userId:v,totalScore:c}),Response.json({success:!0,feedbackId:r.id},{status:200})}catch(e){return d.v.error("API Save Feedback","Feedback save failed",e),console.error("Error:",e),Response.json({success:!1,error:e instanceof Error?e.message:"Unknown error occurred"},{status:500})}}async function u(){return Response.json({success:!0,message:"Save Feedback API",status:"active"},{status:200})}let l=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/save-feedback/route",pathname:"/api/save-feedback",filename:"route",bundlePath:"app/api/save-feedback/route"},resolvedPagePath:"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\api\\save-feedback\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:f,serverHooks:v}=l;function g(){return(0,n.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:f})}},5522:()=>{},8730:()=>{},97:(e,r,t)=>{"use strict";e.exports=t(4870)},7920:(e,r,t)=>{"use strict";t.d(r,{db:()=>a,j:()=>s}),function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'firebase-admin/auth'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'firebase-admin/firestore'");throw e.code="MODULE_NOT_FOUND",e}();let{auth:s,db:a}=(Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())().length||Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())({credential:Object(function(){var e=Error("Cannot find module 'firebase-admin/app'");throw e.code="MODULE_NOT_FOUND",e}())({projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n")})}),{auth:Object(function(){var e=Error("Cannot find module 'firebase-admin/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),db:Object(function(){var e=Error("Cannot find module 'firebase-admin/firestore'");throw e.code="MODULE_NOT_FOUND",e}())()})},2348:(e,r,t)=>{"use strict";t.d(r,{v:()=>a});class s{createLogEntry(e,r,t,s,a){return{timestamp:new Date().toISOString(),level:e,service:r,message:t,data:s,error:a}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&this.logs.shift();let r=`[${e.timestamp}] [${e.level.toUpperCase()}] [${e.service}] ${e.message}`;switch(e.level){case"debug":console.debug(r,e.data);break;case"info":console.info(r,e.data);break;case"warn":console.warn(r,e.data);break;case"error":console.error(r,e.error||e.data)}}debug(e,r,t){this.addLog(this.createLogEntry("debug",e,r,t))}info(e,r,t){this.addLog(this.createLogEntry("info",e,r,t))}warn(e,r,t){this.addLog(this.createLogEntry("warn",e,r,t))}error(e,r,t){this.addLog(this.createLogEntry("error",e,r,void 0,t))}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}constructor(){this.logs=[],this.maxLogs=1e3}}let a=new s}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[173],()=>t(2883));module.exports=s})();