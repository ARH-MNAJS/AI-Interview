(()=>{var e={};e.id=61,e.ids=[61],e.modules={6472:e=>{"use strict";e.exports=require("@opentelemetry/api")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3298:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>v,workAsyncStorage:()=>T,workUnitAsyncStorage:()=>g});var r={};s.r(r),s.d(r,{GET:()=>d});var a=s(97),i=s(7278),n=s(3173),o=s(3456),l=s(1849),c=s(1033),h=s(8252),u=s(2348);async function d(){try{u.v.info("ServicesStatus","Checking all services status");let[e,t,s]=await Promise.allSettled([l.w.testConnection(),c.T.testConnection(),h.d.testConnection()]),r={tts:{status:"fulfilled"===e.status?e.value?"healthy":"unhealthy":"error",error:"rejected"===e.status?e.reason?.message:null,service:"Edge TTS",url:"https://dyptts.ccxai.uk"},stt:{status:"fulfilled"===t.status?t.value?"healthy":"unhealthy":"error",error:"rejected"===t.status?t.reason?.message:null,service:"Whisper STT",url:"https://dypstt.ccxai.uk"},llm:{status:"fulfilled"===s.status?s.value?"healthy":"unhealthy":"error",error:"rejected"===s.status?s.reason?.message:null,service:"Ollama",url:"https://dypai.ccxai.uk"}},a="healthy"===r.tts.status&&"healthy"===r.stt.status;return u.v.info("ServicesStatus","Services status check completed",{results:r,allHealthy:a}),o.NextResponse.json({success:!0,allHealthy:a,services:r,timestamp:new Date().toISOString()})}catch(e){return u.v.error("ServicesStatus","Failed to check services status",e),o.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/services-status/route",pathname:"/api/services-status",filename:"route",bundlePath:"app/api/services-status/route"},resolvedPagePath:"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\api\\services-status\\route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:T,workUnitAsyncStorage:g,serverHooks:v}=p;function m(){return(0,n.patchFetch)({workAsyncStorage:T,workUnitAsyncStorage:g})}},5522:()=>{},8730:()=>{},5077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return s}});class s{static get(e,t,s){let r=Reflect.get(e,t,s);return"function"==typeof r?r.bind(e):r}static set(e,t,s,r){return Reflect.set(e,t,s,r)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},9429:(e,t,s)=>{"use strict";s.d(t,{E$:()=>r});let r={EDGE_TTS:{URL:process.env.NEXT_PUBLIC_EDGE_TTS_URL||"https://dyptts.ccxai.uk",VOICE_ID:process.env.NEXT_PUBLIC_TTS_VOICE_ID||"en-IN-NeerjaExpressiveNeural"},WHISPER_STT:{URL:process.env.NEXT_PUBLIC_WHISPER_STT_URL||"https://dypstt.ccxai.uk"},OLLAMA:{URL:process.env.NEXT_PUBLIC_OLLAMA_URL||"https://dypai.ccxai.uk",MODEL:process.env.NEXT_PUBLIC_OLLAMA_MODEL||"gemma3:latest"}}},8252:(e,t,s)=>{"use strict";s.d(t,{d:()=>a});class r{constructor(){this.baseUrl=process.env.NEXT_PUBLIC_OLLAMA_URL||"https://dypai.ccxai.uk",this.model=process.env.NEXT_PUBLIC_OLLAMA_MODEL||"gemma3:latest",console.log("ClientOllamaAdapter initialized:",{baseUrl:this.baseUrl,model:this.model})}async generateResponse(e){console.log("Starting client-side LLM generation",{messageCount:e.length,model:this.model,baseUrl:this.baseUrl});try{let t=await fetch(`${this.baseUrl}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:this.model,messages:e,stream:!1})});if(!t.ok)throw Error(`Ollama responded with status: ${t.status} - ${t.statusText}`);let s=await t.json(),r=s.message.content;return console.log("Client-side LLM generation completed",{responseLength:r.length,totalDuration:s.total_duration,evalCount:s.eval_count}),r}catch(e){throw console.error("Client-side LLM generation failed:",e),e}}async testConnection(){try{console.log("Testing client-side Ollama connection");let e=await fetch(`${this.baseUrl}/api/tags`);if(!e.ok)return console.log("Client-side Ollama health check:",{status:"unhealthy",statusCode:e.status}),!1;{let t=await e.json(),s=t.models?.some(e=>e.name.includes(this.model.split(":")[0]));return console.log("Client-side Ollama health check:",{status:"healthy",modelAvailable:s,availableModels:t.models?.map(e=>e.name)||[]}),s}}catch(e){return console.error("Client-side Ollama health check failed:",e),!1}}}let a=new r},2348:(e,t,s)=>{"use strict";s.d(t,{v:()=>a});class r{createLogEntry(e,t,s,r,a){return{timestamp:new Date().toISOString(),level:e,service:t,message:s,data:r,error:a}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&this.logs.shift();let t=`[${e.timestamp}] [${e.level.toUpperCase()}] [${e.service}] ${e.message}`;switch(e.level){case"debug":console.debug(t,e.data);break;case"info":console.info(t,e.data);break;case"warn":console.warn(t,e.data);break;case"error":console.error(t,e.error||e.data)}}debug(e,t,s){this.addLog(this.createLogEntry("debug",e,t,s))}info(e,t,s){this.addLog(this.createLogEntry("info",e,t,s))}warn(e,t,s){this.addLog(this.createLogEntry("warn",e,t,s))}error(e,t,s){this.addLog(this.createLogEntry("error",e,t,void 0,s))}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}constructor(){this.logs=[],this.maxLogs=1e3}}let a=new r},1033:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(9429),a=s(2348);class i{constructor(){this.baseUrl=r.E$.WHISPER_STT.URL,a.v.info("WhisperSTTClient","Initialized Whisper STT client",{baseUrl:this.baseUrl})}async transcribe(e){a.v.debug("WhisperSTTClient","Starting speech transcription",{audioSize:e.size,audioType:e.type});let t=null;for(let s=1;s<=3;s++)try{let t=new FormData;t.append("audio",e,"audio.wav"),a.v.debug("WhisperSTTClient",`Transcription attempt ${s}/3`,{audioSize:e.size});let r=new AbortController,i=setTimeout(()=>r.abort(),3e4),n=await fetch(`${this.baseUrl}/transcribe`,{method:"POST",body:t,signal:r.signal,headers:{}});if(clearTimeout(i),!n.ok){let e=await n.text().catch(()=>"Unknown error");throw Error(`STT service responded with status: ${n.status}, body: ${e}`)}let o=await n.json();return a.v.info("WhisperSTTClient","Speech transcription completed",{text:o.text?.substring(0,100)+(o.text?.length>100?"...":""),textLength:o.text?.length||0,confidence:o.confidence,duration:o.duration,attempt:s}),{text:o.text||"",confidence:o.confidence,duration:o.duration}}catch(e){if(t=e,a.v.warn("WhisperSTTClient",`Transcription attempt ${s} failed`,{error:t.message,attempt:s,willRetry:s<3}),s<3){let e=1e3*Math.pow(2,s-1);a.v.debug("WhisperSTTClient",`Waiting ${e}ms before retry`),await new Promise(t=>setTimeout(t,e))}}throw a.v.error("WhisperSTTClient","All transcription attempts failed",t),t||Error("Transcription failed after all retries")}async transcribeStream(e){a.v.debug("WhisperSTTClient","Starting stream transcription",{chunkSize:e.byteLength});try{let t=new Blob([e],{type:"audio/wav"});return await this.transcribe(t)}catch(e){throw a.v.error("WhisperSTTClient","Stream transcription failed",e),e}}async testConnection(){try{a.v.debug("WhisperSTTClient","Testing STT service connection");let e=await fetch(`${this.baseUrl}/health`),t=e.ok;return a.v.info("WhisperSTTClient","STT service health check",{status:t?"healthy":"unhealthy",statusCode:e.status}),t}catch(e){return a.v.error("WhisperSTTClient","STT service health check failed",e),!1}}}let n=new i},1849:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var r=s(9429),a=s(2348);class i{constructor(){this.baseUrl=r.E$.EDGE_TTS.URL,this.voiceId=r.E$.EDGE_TTS.VOICE_ID,a.v.info("EdgeTTSClient","Initialized Edge TTS client",{baseUrl:this.baseUrl,voiceId:this.voiceId})}async synthesize(e,t){let s=t||this.voiceId;a.v.debug("EdgeTTSClient","Starting speech synthesis",{text:e.substring(0,100)+"...",voiceId:s});try{let t=await fetch(`${this.baseUrl}/synthesize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,voice:s})});if(!t.ok)throw Error(`TTS service responded with status: ${t.status}`);let r=await t.arrayBuffer();return a.v.info("EdgeTTSClient","Speech synthesis completed",{audioSize:r.byteLength,textLength:e.length}),r}catch(e){throw a.v.error("EdgeTTSClient","Speech synthesis failed",e),e}}async testConnection(){try{a.v.debug("EdgeTTSClient","Testing TTS service connection");let e=await fetch(`${this.baseUrl}/health`),t=e.ok;return a.v.info("EdgeTTSClient","TTS service health check",{status:t?"healthy":"unhealthy",statusCode:e.status}),t}catch(e){return a.v.error("EdgeTTSClient","TTS service health check failed",e),!1}}}let n=new i}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[173,431],()=>s(3298));module.exports=r})();