(()=>{var e={};e.id=608,e.ids=[608],e.modules={6472:e=>{"use strict";e.exports=require("@opentelemetry/api")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},3221:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>i});var s=t(617),a=t(7278),o=t(6904),l=t.n(o),n=t(8303),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(r,d);let i=["",{children:["(root)",{children:["reports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7062)),"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\(root)\\reports\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6389)),"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\(root)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2452,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7910))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,1745)),"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2452,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7910))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\sudar\\Downloads\\interview-ai\\app\\(root)\\reports\\page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(root)/reports/page",pathname:"/reports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},3310:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"009014325b7b1bd583f774c05c90e0e17384c4d9c2":()=>s.wR,"00be45b3173ac93d69fcb3fb8303fc683a5e143903":()=>s.HW,"00c0fa45a1a28d5c16a6a1cd96c00d8afb18bb0e1f":()=>s.JY,"00fc42ac67bd00033b3cf0566aa46eb1569b3de7c7":()=>s.CI,"4001e2350799b5b70180c9b09d6afd1d67d18b1cd7":()=>s.eE,"400474cd152df4b1763b585619d55899cc4d23ad4a":()=>s.Ak,"400ec9ec2f4989b37dac48b258fb0e8c0c57da9228":()=>s.Hh,"4030a8907117017840e541e66b3878f2958fcea903":()=>s.Jv,"4067e603649f68be5a1d67c3f86d219019826049e1":()=>s.$G,"40b6039dc5914bcc16040feeaf3fcb60b605e330a9":()=>s.ef});var s=t(9131)},312:(e,r,t)=>{Promise.resolve().then(t.bind(t,7062))},7160:(e,r,t)=>{Promise.resolve().then(t.bind(t,6978))},6978:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(6731),a=t(4030),o=t(3921);!function(){var e=Error("Cannot find module 'sonner'");throw e.code="MODULE_NOT_FOUND",e}();var l=t(5588);!function(){var e=Error("Cannot find module 'firebase/auth'");throw e.code="MODULE_NOT_FOUND",e}();var n=t(1743),d=t(174);let i=()=>{let e=(0,o.useRouter)(),[r,t]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),[x,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[u,m]=(0,a.useState)([]),[f,g]=(0,a.useState)({branch:"",year:""}),[v,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let r=Object(function(){var e=Error("Cannot find module 'firebase/auth'");throw e.code="MODULE_NOT_FOUND",e}())(l.j,async r=>{if(c(!1),t(r),!r){e.push("/sign-in");return}await j(r)});return()=>r()},[e]);let j=async e=>{try{let r=await e.getIdToken(),t=await fetch("/api/reports",{headers:{Authorization:`Bearer ${r}`}}),s=await t.json();s.success?(h(!0),await y(s.collegeId)):h(!1)}catch(e){console.error("Error checking TPO access:",e),h(!1)}},y=async e=>{try{let r=await fetch("/api/colleges"),t=await r.json();if(t.success){let r=t.data.find(r=>r.id===e);r&&b(r)}}catch(e){console.error("Error fetching college details:",e)}},N=async()=>{if(!r||!p){console.log("❌ fetchInterviews: Missing user or college",{user:!!r,college:!!p});return}console.log("\uD83D\uDD0D fetchInterviews: Starting request",{collegeId:p.id,collegeName:p.name,filters:f,userId:r.uid});try{let e=await r.getIdToken(),t=new URLSearchParams({...f.branch&&{branch:f.branch},...f.year&&{year:f.year}}),s=`/api/reports?${t}`;console.log("\uD83D\uDCE1 fetchInterviews: Making API request",{url:s,params:Object.fromEntries(t)});let a=await fetch(s,{headers:{Authorization:`Bearer ${e}`}});console.log("\uD83D\uDCE1 fetchInterviews: Response status",{status:a.status,statusText:a.statusText});let o=await a.json();console.log("\uD83D\uDCCA fetchInterviews: API response",o),o.success?(console.log("✅ fetchInterviews: Success",{interviewCount:o.data?.length||0,interviews:o.data}),m(o.data||[]),w(!0)):(console.error("❌ fetchInterviews: API returned error",o.error),Object(function(){var e=Error("Cannot find module 'sonner'");throw e.code="MODULE_NOT_FOUND",e}()).error("Failed to fetch interviews"))}catch(e){console.error("❌ fetchInterviews: Exception occurred",e),Object(function(){var e=Error("Cannot find module 'sonner'");throw e.code="MODULE_NOT_FOUND",e}()).error("Failed to fetch interviews")}},k=r=>{e.push(`/reports/${r}`)};return i?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."})})}):x&&p?(0,s.jsxs)("div",{className:"flex flex-col gap-8 max-w-7xl mx-auto p-6",children:[(0,s.jsx)("div",{className:"border-gradient p-0.5 rounded-2xl w-full",children:(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Filter Interviews"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 form",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Filter by Branch"}),(0,s.jsxs)("select",{value:f.branch,onChange:e=>g(r=>({...r,branch:e.target.value})),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"All Branches"}),p.branches.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Filter by Year"}),(0,s.jsxs)("select",{value:f.year,onChange:e=>g(r=>({...r,year:e.target.value})),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"All Years"}),p.years.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)(n.$,{onClick:N,className:"btn-primary w-full",children:"Load Reports"})})]})]})}),v&&(0,s.jsx)("div",{className:"border-gradient p-0.5 rounded-2xl w-full",children:(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold mb-4",children:["Interview Reports (",u.length,")"]}),u.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse border border-border rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-800 dark:bg-gray-900",children:[(0,s.jsx)("th",{className:"border border-border px-4 py-3 text-left text-white font-semibold",children:"Role"}),(0,s.jsx)("th",{className:"border border-border px-4 py-3 text-left text-white font-semibold",children:"Level"}),(0,s.jsx)("th",{className:"border border-border px-4 py-3 text-left text-white font-semibold",children:"Type"}),(0,s.jsx)("th",{className:"border border-border px-4 py-3 text-left text-white font-semibold",children:"Target Branches"}),(0,s.jsx)("th",{className:"border border-border px-4 py-3 text-left text-white font-semibold",children:"Target Years"}),(0,s.jsx)("th",{className:"border border-border px-4 py-3 text-left text-white font-semibold",children:"Questions"}),(0,s.jsx)("th",{className:"border border-border px-4 py-3 text-left text-white font-semibold",children:"Created"}),(0,s.jsx)("th",{className:"border border-border px-4 py-3 text-left text-white font-semibold",children:"Action"})]})}),(0,s.jsx)("tbody",{children:u.map(e=>(0,s.jsxs)("tr",{className:"bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)("td",{className:"border border-border px-4 py-3 text-black dark:text-white",children:e.role}),(0,s.jsx)("td",{className:"border border-border px-4 py-3 text-black dark:text-white",children:e.level}),(0,s.jsx)("td",{className:"border border-border px-4 py-3 text-black dark:text-white",children:e.type}),(0,s.jsx)("td",{className:"border border-border px-4 py-3 text-black dark:text-white",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(e.targetBranches||[]).slice(0,2).map((e,r)=>(0,s.jsx)("span",{className:"bg-success-100 text-dark-100 text-xs px-2 py-1 rounded",children:e},r)),(e.targetBranches||[]).length>2&&(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["+",(e.targetBranches||[]).length-2," more"]})]})}),(0,s.jsx)("td",{className:"border border-border px-4 py-3 text-black dark:text-white",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(e.targetYears||[]).slice(0,2).map((e,r)=>(0,s.jsx)("span",{className:"bg-primary-200 text-dark-100 text-xs px-2 py-1 rounded",children:e},r)),(e.targetYears||[]).length>2&&(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["+",(e.targetYears||[]).length-2," more"]})]})}),(0,s.jsx)("td",{className:"border border-border px-4 py-3 text-black dark:text-white",children:e.questions.length}),(0,s.jsx)("td",{className:"border border-border px-4 py-3 text-black dark:text-white",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"border border-border px-4 py-3",children:(0,s.jsx)(n.$,{onClick:()=>k(e.id),className:"btn-primary text-sm",children:"Show Report"})})]},e.id))})]})}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(d.default,{src:"/robot.png",alt:"No Reports",width:120,height:120,className:"mx-auto opacity-30 mb-4"}),(0,s.jsx)("p",{className:"text-foreground text-lg font-medium",children:"No interviews found for the selected filters."}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm mt-2",children:"Try adjusting your filters or check back later when interviews are assigned to your students."})]})]})}),!v&&(0,s.jsx)("div",{className:"border-gradient p-0.5 rounded-2xl w-full",children:(0,s.jsxs)("div",{className:"card p-12 text-center",children:[(0,s.jsx)(d.default,{src:"/robot.png",alt:"Get Started",width:150,height:150,className:"mx-auto opacity-40 mb-6"}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Ready to View Reports?"}),(0,s.jsx)("p",{className:"text-light-100 mb-6",children:'Set your filters above and click "Load Reports" to see interview analytics for your students.'})]})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center max-w-md",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(d.default,{src:"/robot.png",alt:"Access Denied",width:200,height:200,className:"mx-auto opacity-50"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Access Not Allowed"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access the reports section. This area is restricted to Training and Placement Officers (TPO) only."}),(0,s.jsx)(n.$,{onClick:()=>e.push("/"),className:"btn-primary",children:"Go Back to Home"})]})})}},7062:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(2305).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\sudar\\\\Downloads\\\\interview-ai\\\\app\\\\(root)\\\\reports\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\sudar\\Downloads\\interview-ai\\app\\(root)\\reports\\page.tsx","default")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[173,526,658,402,935,306],()=>t(3221));module.exports=s})();